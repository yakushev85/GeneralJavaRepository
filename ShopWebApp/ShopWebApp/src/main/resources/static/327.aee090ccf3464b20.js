"use strict";(self.webpackChunkui_shop_app=self.webpackChunkui_shop_app||[]).push([[327],{2327:(q,l,u)=>{u.r(l),u.d(l,{ProductModule:()=>C});var c=u(9808),d=u(1810),f=u(262),t=u(1223),p=u(4877);let g=(()=>{class o{constructor(e,r){this.productService=e,this.router=r}resolve(e,r){return this.productService.getItem(e.params.itemid).pipe((0,f.K)(s=>this.router.navigateByUrl("/")))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(p.M5),t.LFG(d.F0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var i=u(2382);function b(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"fieldset",2)(3,"fieldset",3),t._UZ(4,"input",4),t.qZA(),t.TgZ(5,"fieldset",3),t._UZ(6,"input",5),t.qZA(),t.TgZ(7,"fieldset",3),t._UZ(8,"input",6),t.qZA()(),t.TgZ(9,"p",7)(10,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitAdminForm()}),t._uU(11,"Update Product"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.productAdminForm),t.xp6(1),t.Q6J("disabled",e.isSubmitting),t.xp6(2),t.Q6J("value",null==e.product?null:e.product.id),t.xp6(2),t.Q6J("value",null==e.product?null:e.product.name),t.xp6(4),t.Q6J("disabled",!e.productAdminForm.valid)}}function _(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"table",9)(2,"tbody")(3,"tr")(4,"th",10),t._uU(5,"Name"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()(),t.TgZ(8,"tr")(9,"th",10),t._uU(10,"Price"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"currency"),t.qZA()(),t.TgZ(14,"tr")(15,"th",10),t._uU(16,"Created At"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()(),t.TgZ(19,"form",1)(20,"fieldset",2)(21,"fieldset",3),t._UZ(22,"textarea",11),t.qZA()(),t.TgZ(23,"p",7)(24,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitForm()}),t._uU(25,"Buy Product"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(7),t.Oqu(null==e.product?null:e.product.name),t.xp6(5),t.Oqu(t.xi3(13,6,null==e.product?null:e.product.price,"USD")),t.xp6(6),t.Oqu(null==e.product?null:e.product.createdAt),t.xp6(1),t.Q6J("formGroup",e.productForm),t.xp6(1),t.Q6J("disabled",e.isSubmitting),t.xp6(4),t.Q6J("disabled",!e.productForm.valid)}}let v=(()=>{class o{constructor(e,r,s,a,m,F){this.route=e,this.router=r,this.userService=s,this.transactionService=a,this.productService=m,this.fb=F,this.productForm=this.fb.group({description:["",i.kI.required]}),this.productAdminForm=this.fb.group({id:["",i.kI.required],name:["",i.kI.required],price:["",i.kI.required]}),this.isSubmitting=!1,this.isAdmin=!1}ngOnInit(){this.route.data.subscribe(e=>{this.product=e.product,this.productAdminForm.patchValue(this.product)}),this.userService.isAdmin.subscribe(e=>{this.isAdmin=e})}submitForm(){var e;if(!this.product)return;this.isSubmitting=!0;let r={description:this.productForm.value.description,productId:null===(e=this.product)||void 0===e?void 0:e.id};this.transactionService.createItem(r).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/transactions")},error:()=>{this.isSubmitting=!1}})}submitAdminForm(){this.product&&(this.isSubmitting=!0,this.productService.update(this.productAdminForm.value).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/products")},error:()=>{this.isSubmitting=!1}}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(p.KD),t.Y36(p.pX),t.Y36(p.M5),t.Y36(i.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-item"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","id","type","number","readonly","true",1,"form-control","form-control-md",3,"value"],["formControlName","name","type","text","placeholder","Product Name",1,"form-control","form-control-md",3,"value"],["formControlName","price","type","number","value","product?.price","placeholder","Product Price",1,"form-control","form-control-md"],[1,"mb-3","p-2"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"table","table-light"],["scope","row"],["formControlName","description","type","text","placeholder","Description",1,"form-control","form-control-md"],["type","button",1,"btn-dark",3,"disabled","click"]],template:function(e,r){1&e&&(t.YNc(0,b,12,5,"div",0),t.YNc(1,_,26,9,"div",0)),2&e&&(t.Q6J("ngIf",r.isAdmin),t.xp6(1),t.Q6J("ngIf",!r.isAdmin))},directives:[c.O5,i._Y,i.JL,i.sg,i.Fj,i.wV,i.JJ,i.u],pipes:[c.H9],styles:[""]}),o})();var h=u(1724);function A(o,n){1&o&&(t.TgZ(0,"div")(1,"a",12),t._uU(2,"Add"),t.qZA()())}function Z(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"th",13),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"a",14),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.MGl("routerLink","/products/",e.id,""),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.Oqu(t.xi3(8,5,e.price,"USD")),t.xp6(3),t.Oqu(t.xi3(11,8,e.createdAt,"medium"))}}function P(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"fieldset",2)(3,"fieldset",3),t._UZ(4,"input",4),t.qZA(),t.TgZ(5,"fieldset",3),t._UZ(6,"input",5),t.qZA()(),t.TgZ(7,"p",6)(8,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitAdminForm()}),t._uU(9,"Create Product"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.productAdminForm),t.xp6(1),t.Q6J("disabled",e.isSubmitting),t.xp6(6),t.Q6J("disabled",!e.productAdminForm.valid)}}const T=[{path:"",component:(()=>{class o{constructor(e,r){this.productService=e,this.userService=r,this.products=[],this.isAdmin=!1,this.pageNumber=1,this.pageSize=10,this.totalElements=0}ngOnInit(){this.listValues(),this.userService.isAdmin.subscribe(e=>{this.isAdmin=e})}listValues(){this.productService.getAll(this.pageNumber-1,this.pageSize).subscribe(e=>{e&&(this.products=e.content,this.pageNumber=e.pageable.pageNumber+1,this.pageSize=e.pageable.pageSize,this.totalElements=e.totalElements)})}updatePageSize(e){this.pageSize=+e,this.listValues()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.M5),t.Y36(p.KD))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-list"]],decls:31,vars:7,consts:[[4,"ngIf"],[1,"table","table-light"],["scope","col"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-9",2,"padding-left","5%"],[3,"page","pageSize","collectionSize","maxSize","boundaryLinks","pageChange"],[1,"col-md-3","mt-2",2,"text-align","right"],[1,"mr-2"],[3,"change"],["pageSizeSelect",""],["selected","true"],["routerLink","/products/new",1,"btn","btn-primary"],["scope","row"],[3,"routerLink"]],template:function(e,r){if(1&e){const s=t.EpF();t.YNc(0,A,3,0,"div",0),t.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th",2),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"th",2),t._uU(9,"Price"),t.qZA(),t.TgZ(10,"th",2),t._uU(11,"Created At"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,Z,12,11,"tr",3),t.qZA()(),t.TgZ(14,"div")(15,"div",4)(16,"div",5)(17,"ngb-pagination",6),t.NdJ("pageChange",function(m){return r.pageNumber=m})("pageChange",function(){return r.listValues()}),t.qZA()(),t.TgZ(18,"div",7)(19,"span",8),t._uU(20,"Page Size "),t.qZA(),t.TgZ(21,"select",9,10),t.NdJ("change",function(){t.CHM(s);const m=t.MAs(22);return r.updatePageSize(m.value)}),t.TgZ(23,"option"),t._uU(24,"5"),t.qZA(),t.TgZ(25,"option",11),t._uU(26,"10"),t.qZA(),t.TgZ(27,"option"),t._uU(28,"20"),t.qZA(),t.TgZ(29,"option"),t._uU(30,"50"),t.qZA()()()()()}2&e&&(t.Q6J("ngIf",r.isAdmin),t.xp6(13),t.Q6J("ngForOf",r.products),t.xp6(4),t.Q6J("page",r.pageNumber)("pageSize",r.pageSize)("collectionSize",r.totalElements)("maxSize",5)("boundaryLinks",!0))},directives:[c.O5,d.yS,c.sg,h.N9,i.YN,i.Kr],pipes:[c.H9,c.uU],styles:[""]}),o})()},{path:"new",component:(()=>{class o{constructor(e,r,s,a,m){this.route=e,this.router=r,this.userService=s,this.productService=a,this.fb=m,this.productAdminForm=this.fb.group({name:["",i.kI.required],price:["",i.kI.required]}),this.isSubmitting=!1,this.isAdmin=!1}ngOnInit(){this.userService.isAdmin.subscribe(e=>{this.isAdmin=e})}submitAdminForm(){this.isSubmitting=!0,this.productService.add(this.productAdminForm.value).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/products")},error:()=>{this.isSubmitting=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(p.KD),t.Y36(p.M5),t.Y36(i.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-new"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","name","type","text","placeholder","Product Name",1,"form-control","form-control-md"],["formControlName","price","type","number","placeholder","Product Price",1,"form-control","form-control-md"],[1,"mb-3","p-2"],["type","button",1,"btn","btn-success",3,"disabled","click"]],template:function(e,r){1&e&&t.YNc(0,P,10,3,"div",0),2&e&&t.Q6J("ngIf",r.isAdmin)},directives:[c.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.wV],styles:[""]}),o})()},{path:":itemid",component:v,resolve:{product:g}}];let x=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.Bz.forChild(T)],d.Bz]}),o})(),C=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[g],imports:[[c.ez,x,i.u5,i.UX,h.IJ]]}),o})()}}]);