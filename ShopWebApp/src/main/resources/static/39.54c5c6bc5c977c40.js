"use strict";(self.webpackChunkui_shop_app=self.webpackChunkui_shop_app||[]).push([[39],{5039:(C,d,n)=>{n.r(d),n.d(d,{UserModule:()=>T});var l=n(9808),r=n(2382),a=n(1810),h=n(262),e=n(1223),m=n(4877);let g=(()=>{class s{constructor(t,o){this.userService=t,this.router=o}resolve(t,o){return this.userService.getItem(t.params.itemid).pipe((0,h.K)(u=>this.router.navigateByUrl("/")))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(m.KD),e.LFG(a.F0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function U(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"form",1)(4,"fieldset",2)(5,"fieldset",3),e._UZ(6,"input",4),e.qZA(),e.TgZ(7,"fieldset",3),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"fieldset",3)(10,"select",6)(11,"option",7),e._uU(12,"Default"),e.qZA(),e.TgZ(13,"option",8),e._uU(14,"Admin"),e.qZA(),e.TgZ(15,"option",9),e._uU(16,"Locked"),e.qZA()()()(),e.TgZ(17,"p",10)(18,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitForm()}),e._uU(19,"Update User"),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(2),e.AsE("ID: ",null==t.user?null:t.user.id," Username: ",null==t.user?null:t.user.username,""),e.xp6(1),e.Q6J("formGroup",t.userForm),e.xp6(1),e.Q6J("disabled",t.isSubmitting),e.xp6(6),e.Q6J("value",null==t.user?null:t.user.role),e.xp6(8),e.Q6J("disabled",!(t.userForm.value.password==t.userForm.value.repassword&&t.userForm.valid))}}let v=(()=>{class s{constructor(t,o,u,p){this.route=t,this.router=o,this.userService=u,this.fb=p,this.userForm=this.fb.group({password:["",[r.kI.required,r.kI.minLength(3)]],repassword:["",[r.kI.required,r.kI.minLength(3)]],role:""}),this.isSubmitting=!1,this.isAdmin=!1}ngOnInit(){this.route.data.subscribe(t=>{this.user=t.user,this.userForm.patchValue(this.user)}),this.userService.isAdmin.subscribe(t=>{this.isAdmin=t})}submitForm(){var t;if(!this.user)return;this.isSubmitting=!0;let o=this.userForm.value;this.userService.update({id:null===(t=this.user)||void 0===t?void 0:t.id,password:o.password,role:o.role}).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/users")},error:()=>{this.isSubmitting=!1}})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(a.gz),e.Y36(a.F0),e.Y36(m.KD),e.Y36(r.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-item"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","password","type","password","placeholder","New Password",1,"form-control","form-control-md"],["formControlName","repassword","type","password","placeholder","Re-enter new Password",1,"form-control","form-control-md"],["formControlName","role",1,"form-control","form-control-md",3,"value"],["value",""],["value","admin"],["value","locked"],[1,"mb-3","p-2"],["type","button",1,"btn","btn-success",3,"disabled","click"]],template:function(t,o){1&t&&e.YNc(0,U,20,6,"div",0),2&t&&e.Q6J("ngIf",o.isAdmin)},directives:[l.O5,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr],styles:[""]}),s})();var f=n(1724);function b(s,i){if(1&s&&(e.TgZ(0,"tr")(1,"th",13),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"a",14),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA()()),2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.MGl("routerLink","/users/",t.id,""),e.xp6(1),e.Oqu(t.username),e.xp6(2),e.Oqu(t.role)}}function Z(s,i){if(1&s&&(e.TgZ(0,"div")(1,"div")(2,"a",9),e._uU(3,"Add"),e.qZA()(),e.TgZ(4,"table",10)(5,"thead")(6,"tr")(7,"th",11),e._uU(8,"#"),e.qZA(),e.TgZ(9,"th",11),e._uU(10,"Username"),e.qZA(),e.TgZ(11,"th",11),e._uU(12,"Role"),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,b,8,4,"tr",12),e.qZA()()()),2&s){const t=e.oxw();e.xp6(14),e.Q6J("ngForOf",t.users)}}function A(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"form",1)(2,"fieldset",2)(3,"fieldset",3),e._UZ(4,"input",4),e.qZA(),e.TgZ(5,"fieldset",3),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"fieldset",3),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"fieldset",3)(10,"select",7)(11,"option",8),e._uU(12,"Default"),e.qZA(),e.TgZ(13,"option",9),e._uU(14,"Admin"),e.qZA(),e.TgZ(15,"option",10),e._uU(16,"Locked"),e.qZA()()()(),e.TgZ(17,"p",11)(18,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitForm()}),e._uU(19,"New User"),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.userForm),e.xp6(1),e.Q6J("disabled",t.isSubmitting),e.xp6(16),e.Q6J("disabled",!(t.userForm.valid&&t.userForm.value.password==t.userForm.value.repassword))}}const w=[{path:"",component:(()=>{class s{constructor(t){this.userService=t,this.users=[],this.isAdmin=!1,this.pageNumber=1,this.pageSize=10,this.totalElements=0}ngOnInit(){this.listValues(),this.userService.isAdmin.subscribe(t=>{this.isAdmin=t})}listValues(){this.userService.getAll(this.pageNumber-1,this.pageSize).subscribe(t=>{t&&(this.users=t.content,this.pageNumber=t.pageable.pageNumber+1,this.pageSize=t.pageable.pageSize,this.totalElements=t.totalElements)})}updatePageSize(t){this.pageSize=+t,this.listValues()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(m.KD))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-list"]],decls:18,vars:6,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-9",2,"padding-left","5%"],[3,"page","pageSize","collectionSize","maxSize","boundaryLinks","pageChange"],[1,"col-md-3","mt-2",2,"text-align","right"],[1,"mr-2"],[3,"change"],["pageSizeSelect",""],["selected","true"],["routerLink","/users/new",1,"btn","btn-primary"],[1,"table","table-light"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[3,"routerLink"]],template:function(t,o){if(1&t){const u=e.EpF();e.YNc(0,Z,15,1,"div",0),e.TgZ(1,"div")(2,"div",1)(3,"div",2)(4,"ngb-pagination",3),e.NdJ("pageChange",function(c){return o.pageNumber=c})("pageChange",function(){return o.listValues()}),e.qZA()(),e.TgZ(5,"div",4)(6,"span",5),e._uU(7,"Page Size "),e.qZA(),e.TgZ(8,"select",6,7),e.NdJ("change",function(){e.CHM(u);const c=e.MAs(9);return o.updatePageSize(c.value)}),e.TgZ(10,"option"),e._uU(11,"5"),e.qZA(),e.TgZ(12,"option",8),e._uU(13,"10"),e.qZA(),e.TgZ(14,"option"),e._uU(15,"20"),e.qZA(),e.TgZ(16,"option"),e._uU(17,"50"),e.qZA()()()()()}2&t&&(e.Q6J("ngIf",o.isAdmin),e.xp6(4),e.Q6J("page",o.pageNumber)("pageSize",o.pageSize)("collectionSize",o.totalElements)("maxSize",5)("boundaryLinks",!0))},directives:[l.O5,a.yS,l.sg,f.N9,r.YN,r.Kr],styles:[""]}),s})()},{path:"new",component:(()=>{class s{constructor(t,o,u){this.router=t,this.userService=o,this.fb=u,this.userForm=this.fb.group({username:["",[r.kI.required,r.kI.minLength(2)]],password:["",[r.kI.required,r.kI.minLength(3)]],repassword:["",[r.kI.required,r.kI.minLength(3)]],role:""}),this.isSubmitting=!1,this.isAdmin=!1}ngOnInit(){this.userService.isAdmin.subscribe(t=>{this.isAdmin=t})}submitForm(){this.isSubmitting=!0,this.userService.add(this.userForm.value).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/users")},error:()=>{this.isSubmitting=!1}})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(a.F0),e.Y36(m.KD),e.Y36(r.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-new"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","username","type","text","placeholder","Username",1,"form-control","form-control-md"],["formControlName","password","type","password","placeholder","Password",1,"form-control","form-control-md"],["formControlName","repassword","type","password","placeholder","Re-enter password",1,"form-control","form-control-md"],["formControlName","role",1,"form-control","form-control-md"],["value",""],["value","admin"],["value","locked"],[1,"mb-3","p-2"],["type","button",1,"btn","btn-success",3,"disabled","click"]],template:function(t,o){1&t&&e.YNc(0,A,20,3,"div",0),2&t&&e.Q6J("ngIf",o.isAdmin)},directives:[l.O5,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr],styles:[""]}),s})()},{path:":itemid",component:v,resolve:{user:g}}];let S=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[a.Bz.forChild(w)],a.Bz]}),s})(),T=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[g],imports:[[l.ez,r.u5,r.UX,S,f.IJ]]}),s})()}}]);